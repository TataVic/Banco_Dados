--exercicio trigger 2 - 03/10
--1 - Faça um trigger com variáveis para, ao invés de inserir uma peça com os valores que o usuário informou,
--não deixe o preço da peça ser inferior a 5. 
Create Trigger Exercicio1 on Peca for insert as 
	DECLARE @preco_minimo float;
    SET @preco_minimo = 5.00;
		INSERT INTO Peca(id, nome, preco)
			SELECT id, nome, preco
			FROM inserted
			WHERE preco >= @preco_minimo;

--2 – Crie um Trigger que ao invés de excluir os fornecedores que não 
--são das categorias ‘A’, ‘B’ e ‘C’, atualize suas categorias para ‘C’. 

--3 - Ao se inserir um projeto, verificar se o custo está acima do permitido (50000). 
--Se for, incluir com o limite de 50.000. Se não, incluir com o valor passado. 

--4 - Criar uma tabela de Historico de Projetos. 

--5 - Criar um trigger para atualizar a tabela Histórico de Projetos
--que é disparado quando houver a modificação SOMENTE no atributo PDuração no Projeto. 

--6 - Criar 2 tabelas: Projeto_atualizado e Projeto_antigo 

--7 - Criar um trigger que armazena em uma tabela os dados atualizados do Projeto(Projeto_atualizado)
--e em outra tabela os dados do Projeto antes de atualizar (Projeto_antigo) 